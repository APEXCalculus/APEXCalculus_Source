\begingroup \toks 0={macro:-> \begin {axis}[ width=\marginparwidth +25pt,tick label style={font=\scriptsize },axis on top, axis y line=none, axis z line=none,axis lines=center, y dir=reverse, name=myplot, xtick={1,2,3}, ztick=\empty ,ymin=-2,ymax=2,xmin=-2.2,xmax=2.2, zmin=-.2,zmax=3.2] \par \par \addplot 3[domain=1:3,y domain=-20:340, surf,colormap={mp2}{\colormapplaneone },opacity=.7,faceted color=black!40,samples=4,samples y=36,very thin,z buffer=sort] ({2*cos(y)},{2*sin(y)},{x}); \par \addplot 3[domain=1:2,y domain=150:360, surf,colormap={mp2}{\colormaptwo },opacity=.8,faceted color=black!60,very thin,z buffer=sort,samples=8,samples y=16] ({(x)*cos(y)},{(x)*sin(y)},{2*x-1}); \par \addplot 3[domain=1:2,y domain=0:150, surf,colormap={mp2}{\colormaptwo },opacity=.8,faceted color=black!60,very thin,z buffer=sort,samples=8,samples y=16] ({(x)*cos(y)},{(x)*sin(y)},{2*x-1}); \par \draw [draw=black,thick] (axis cs:2,0,1)--(axis cs:2,0,3); \par \draw [dashed,draw=black,thick] (axis cs:2,0,1) -- (axis cs:1,0,1)--(axis cs:2,0,3); \par \addplot 3[domain=0:360,samples y=0,smooth,] ({2*cos(x)},{2*sin(x)},{3}); \par \addplot 3[domain=-30:155,samples y=0,smooth,] ({2*cos(x)},{2*sin(x)},{1}); \par \addplot 3[domain=160:330,samples y=0,smooth,dashed] ({2*cos(x)},{2*sin(x)},{1}); \par \addplot 3[domain=0:360,samples y=0,smooth,dashed] ({cos(x)},{sin(x)},{1}); \par \draw [dashed] (axis cs:0,0,0) -- (axis cs: 0,0,2); \par \draw [dashed] (axis cs:0,0,0) -- (axis cs: 0,0,-.2); \par \draw [->,>=stealth,] (axis cs:0,0,2) -- (axis cs: 0,0,3.2); \par \par \par \par \end {axis} \par \node [right] at (myplot.right of origin)[shift={(-20pt,-15pt)}] {\scriptsize $x$}; \node [above] at (myplot.above origin) [shift={(0,-20pt)}] {\scriptsize $y$}; }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %

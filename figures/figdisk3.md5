\begingroup \toks 0={macro:-> \begin {axis}[ width=\marginparwidth +25pt,tick label style={font=\scriptsize },axis on top, axis y line=none, axis lines=center, y dir=reverse, name=myplot, ztick={1,2,3},ymin=-2.1,ymax=2.1,xmin=-.1,xmax=2.3, zmin=-.5, zmax=4.2] \par \addplot 3[domain=1:2,y domain=-40:320,surf,samples y=36,shader=flat,colormap={coloronemap}{\colormapone }] (x,{sin(y)*(2-1/x)},{cos(y)*(2-1/x)+2}); \par \par \addplot 3[domain=-30:120,samples y=0,black,thick,smooth,{\colortwo }] (1.5,{1.37*cos(x)},{1.37*sin(x)+2}); \par \addplot 3[domain=120:330,samples y=0,black,thick,smooth,{\colortwo },dashed,opacity=.5] (1.5,{1.37*cos(x)},{1.37*sin(x)+2}); \par \par \addplot 3[domain=0:360,samples y=0,black,thin,smooth,black] (2,{1.5*cos(x)},{1.5*sin(x)+2}); \par \addplot 3[domain=-30:120,samples y=0,black,thin,smooth,black] (1,{1*cos(x)},{1*sin(x)+2}); \par \par \addplot 3[domain=1.6:2,samples y=0,thick,{\colorone }] (x,0,{1/x}); \addplot 3[domain=1:1.6,samples y=0,thick,{\colorone },opacity=.3] (x,0,{1/x}); \par \draw [dashed] (axis cs:-.1,0,2) -- (axis cs:2.3,0,2); \par \par \par \par \par \end {axis} \par \node [right] at (myplot.right of origin)[shift={(-20pt,-15pt)}] {\scriptsize $x$}; \node [above] at (myplot.above origin) [shift={(0,-17pt)}] {\scriptsize $y$}; }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %

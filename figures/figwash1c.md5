\begingroup \toks 0={macro:-> \begin {axis}[ width=\marginparwidth +25pt,tick label style={font=\scriptsize },axis on top, axis y line=none, axis lines=center, y dir=reverse, name=myplot, xtick={1,2,3}, ztick=\empty ,ymin=-4.5,ymax=4.5,xmin=-.2,xmax=3.3, zmin=-4.5,zmax=4.5] \par \addplot 3[domain=0:1,y domain=90:270, samples y=36,surf, shader=flat, colormap={mp2}{\colormaptwo }] (2,{cos(y)*(2+x)},{sin(y)*(2+x)}); \par \addplot 3[domain=1:3,y domain=0:1,surf,shader=flat,colormap={mp2}{\colormapone }] (x,0,{y*((2*x-1)-(x^2-2*x+2))+x^2-2*x+2}); \par \addplot 3[domain=0:1,y domain=0:180, samples y=36,surf, shader=flat, colormap={mp2}{\colormaptwo }] (2,{sin(y)*(2+x)},{cos(y)*(2+x)}); \par \addplot 3[domain=1:3,samples y=0,black,thick,smooth,] (x,0,{x^2-2*x+2}); \par \par \addplot 3[domain=1:3,samples y=0,black,thick,smooth,] (x,0,{2*x-1}); \par \par \par \par \par \addplot 3[domain=0:300,samples y=0,{\colortwo },thick,smooth,] (2,{3*sin(x)},{3*cos(x)}); \par \addplot 3[domain=0:360,samples y=0,{\colortwo },thick,smooth,] (2,{2*cos(x)},{2*sin(x)}); \par \par \par \par \end {axis} \par \node [right] at (myplot.right of origin)[shift={(-20pt,-15pt)}] {\scriptsize $x$}; \node [above] at (myplot.above origin) [shift={(0,-17pt)}] {\scriptsize $y$}; }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %

\begin{tikzpicture}
\begin{axis}%
[
width=\marginparwidth+25pt,%
tick label style={font=\scriptsize},axis on top,
			axis y line=none,
%			axis x line=none,
%%			axis z line=none,%
			axis lines=center,
			y dir=reverse,
%			view={125}{30},
			name=myplot,
%			%x=.37\marginparwidth,
%			%y=.37\marginparwidth,
			xtick={1,2,3},
			ztick=\empty,% 
%			extra x ticks={1,3},
%			extra x tick labels={$a$,$b$},
%			ytick={.1,1},
%			%minor y tick num=1,%extra y ticks={-5,-3,...,7},%
			ymin=-1,ymax=1,%
			xmin=-1.2,xmax=1.2,
			zmin=-.1,zmax=1.2%
]

\addplot3[domain=0:.5,y domain=-220:140,samples y=36,surf,shader=flat,colormap={mp2}{\colormapone}] ({cos(y)},{sin(y)},{x});

\addplot3[domain=0:1,y domain=-180:180,samples y=36,surf,shader=flat,colormap={mp2}{\colormapone}] ({cos(y)*x},{sin(y)*x},{1/(1+x^2)});

%\filldraw[fill={\coloronefill},draw=black,thick] (axis cs:1,0,1) -- (axis cs:2,0,1)--(axis cs:2,0,3) -- cycle;
%
\addplot3[domain=.6:.7,y domain=0:360,samples y=36,surf,shader=flat,colormap={mp2}{\colormaptwo}] ({cos(y)*x},{sin(y)*x},.7);


\addplot3[domain=0:.7,y domain=150:325,surf,shader=flat,colormap={mp2}{\colormaptwo}] ({.7*cos(y)},{.7*sin(y)},x);

\addplot3[domain=0:.7,y domain=-35:150,surf,shader=flat,colormap={mp2}{\colormaptwo}] ({.7*cos(y)},{.7*sin(y)},x);



\draw [thin,smooth,dashed]
(axis cs:0.6,0,0)--(axis cs:0.5909,0.1042,0)--(axis
cs:0.5638,0.2052,0)--(axis cs:0.5196,0.3,0)--(axis
cs:0.4596,0.3857,0)--(axis cs:0.3857,0.4596,0)--(axis
cs:0.3,0.5196,0)--(axis cs:0.2052,0.5638,0)--(axis
cs:0.1042,0.5909,0)--(axis cs:0,0.6,0)--(axis
cs:-0.1042,0.5909,0)--(axis cs:-0.2052,0.5638,0)--(axis
cs:-0.3,0.5196,0)--(axis cs:-0.3857,0.4596,0)--(axis
cs:-0.4596,0.3857,0)--(axis cs:-0.5196,0.3,0)--(axis
cs:-0.5638,0.2052,0)--(axis cs:-0.5909,0.1042,0)--(axis
cs:-0.6,0,0)--(axis cs:-0.5909,-0.1042,0)--(axis
cs:-0.5638,-0.2052,0)--(axis cs:-0.5196,-0.3,0)--(axis
cs:-0.4596,-0.3857,0)--(axis cs:-0.3857,-0.4596,0)--(axis
cs:-0.3,-0.5196,0)--(axis cs:-0.2052,-0.5638,0)--(axis
cs:-0.1042,-0.5909,0)--(axis cs:0,-0.6,0)--(axis
cs:0.1042,-0.5909,0)--(axis cs:0.2052,-0.5638,0)--(axis
cs:0.3,-0.5196,0)--(axis cs:0.3857,-0.4596,0)--(axis
cs:0.4596,-0.3857,0)--(axis cs:0.5196,-0.3,0)--(axis
cs:0.5638,-0.2052,0)--(axis cs:0.5909,-0.1042,0)--(axis cs:0.6,0,0)--cycle;


\draw [thin,smooth,dashed]
(axis cs:0.7,0,0)--(axis cs:0.6894,0.1216,0)--(axis
cs:0.6578,0.2394,0)--(axis cs:0.6062,0.35,0)--(axis
cs:0.5362,0.45,0)--(axis cs:0.45,0.5362,0)--(axis
cs:0.35,0.6062,0)--(axis cs:0.2394,0.6578,0)--(axis
cs:0.1216,0.6894,0)--(axis cs:0,0.7,0)--(axis
cs:-0.1216,0.6894,0)--(axis cs:-0.2394,0.6578,0)--(axis
cs:-0.35,0.6062,0)--(axis cs:-0.45,0.5362,0)--(axis
cs:-0.5362,0.45,0)--(axis cs:-0.6062,0.35,0)--(axis
cs:-0.6578,0.2394,0)--(axis cs:-0.6894,0.1216,0)--(axis
cs:-0.7,0,0)--(axis cs:-0.6894,-0.1216,0)--(axis
cs:-0.6578,-0.2394,0)--(axis cs:-0.6062,-0.35,0)--(axis
cs:-0.5362,-0.45,0)--(axis cs:-0.45,-0.5362,0)--(axis
cs:-0.35,-0.6062,0)--(axis cs:-0.2394,-0.6578,0)--(axis
cs:-0.1216,-0.6894,0)--(axis cs:0,-0.7,0)--(axis
cs:0.1216,-0.6894,0)--(axis cs:0.2394,-0.6578,0)--(axis
cs:0.35,-0.6062,0)--(axis cs:0.45,-0.5362,0)--(axis
cs:0.5362,-0.45,0)--(axis cs:0.6062,-0.35,0)--(axis
cs:0.6578,-0.2394,0)--(axis cs:0.6894,-0.1216,0)--(axis cs:0.7,0,0)--cycle;

\draw[smooth]
(axis cs:0.7,0,0.7)--(axis cs:0.6894,0.1216,0.7)--(axis
cs:0.6578,0.2394,0.7)--(axis cs:0.6062,0.35,0.7)--(axis
cs:0.5362,0.45,0.7)--(axis cs:0.45,0.5362,0.7)--(axis
cs:0.35,0.6062,0.7)--(axis cs:0.2394,0.6578,0.7)--(axis
cs:0.1216,0.6894,0.7)--(axis cs:0,0.7,0.7)--(axis
cs:-0.1216,0.6894,0.7)--(axis cs:-0.2394,0.6578,0.7)--(axis
cs:-0.35,0.6062,0.7)--(axis cs:-0.45,0.5362,0.7)--(axis
cs:-0.5362,0.45,0.7)--(axis cs:-0.6062,0.35,0.7)--(axis
cs:-0.6578,0.2394,0.7)--(axis cs:-0.6894,0.1216,0.7)--(axis
cs:-0.7,0,0.7)--(axis cs:-0.6894,-0.1216,0.7)--(axis
cs:-0.6578,-0.2394,0.7)--(axis cs:-0.6062,-0.35,0.7)--(axis
cs:-0.5362,-0.45,0.7)--(axis cs:-0.45,-0.5362,0.7)--(axis
cs:-0.35,-0.6062,0.7)--(axis cs:-0.2394,-0.6578,0.7)--(axis
cs:-0.1216,-0.6894,0.7)--(axis cs:0,-0.7,0.7)--(axis
cs:0.1216,-0.6894,0.7)--(axis cs:0.2394,-0.6578,0.7)--(axis
cs:0.35,-0.6062,0.7)--(axis cs:0.45,-0.5362,0.7)--(axis
cs:0.5362,-0.45,0.7)--(axis cs:0.6062,-0.35,0.7)--(axis
cs:0.6578,-0.2394,0.7)--(axis cs:0.6894,-0.1216,0.7)--(axis
cs:0.7,0,0.7)--cycle;

\draw [smooth]
(axis cs:0.6,0,0.7)--(axis cs:0.5909,0.1042,0.7)--(axis
cs:0.5638,0.2052,0.7)--(axis cs:0.5196,0.3,0.7)--(axis
cs:0.4596,0.3857,0.7)--(axis cs:0.3857,0.4596,0.7)--(axis
cs:0.3,0.5196,0.7)--(axis cs:0.2052,0.5638,0.7)--(axis
cs:0.1042,0.5909,0.7)--(axis cs:0,0.6,0.7)--(axis
cs:-0.1042,0.5909,0.7)--(axis cs:-0.2052,0.5638,0.7)--(axis
cs:-0.3,0.5196,0.7)--(axis cs:-0.3857,0.4596,0.7)--(axis
cs:-0.4596,0.3857,0.7)--(axis cs:-0.5196,0.3,0.7)--(axis
cs:-0.5638,0.2052,0.7)--(axis cs:-0.5909,0.1042,0.7)--(axis
cs:-0.6,0,0.7)--(axis cs:-0.5909,-0.1042,0.7)--(axis
cs:-0.5638,-0.2052,0.7)--(axis cs:-0.5196,-0.3,0.7)--(axis
cs:-0.4596,-0.3857,0.7)--(axis cs:-0.3857,-0.4596,0.7)--(axis
cs:-0.3,-0.5196,0.7)--(axis cs:-0.2052,-0.5638,0.7)--(axis
cs:-0.1042,-0.5909,0.7)--(axis cs:0,-0.6,0.7)--(axis
cs:0.1042,-0.5909,0.7)--(axis cs:0.2052,-0.5638,0.7)--(axis
cs:0.3,-0.5196,0.7)--(axis cs:0.3857,-0.4596,0.7)--(axis
cs:0.4596,-0.3857,0.7)--(axis cs:0.5196,-0.3,0.7)--(axis
cs:0.5638,-0.2052,0.7)--(axis cs:0.5909,-0.1042,0.7)--(axis
cs:0.6,0,0.7)--cycle;

%%
\addplot3[domain=0:1,samples y=0,black,thick,smooth,] ({x},{0},{1/(1+x^2)});
%
\addplot3[domain=-50:150,samples y=0,smooth,] ({cos(x)},{sin(x)},{.5});

\addplot3[domain=150:310,samples y=0,smooth,dashed] ({cos(x)},{sin(x)},{.5});

\addplot3[domain=-30:150,samples y=0,smooth,] ({cos(x)},{sin(x)},{0});

\addplot3[domain=150:315,samples y=0,smooth,dashed] ({cos(x)},{sin(x)},{0});
%
%\addplot3[domain=1:3,samples y=0,black,thick,smooth,] (x,0,{x^2-2*x+2});

%\draw (axis cs:1.2,0,2.68) -- node [pos=.6,left] {\scriptsize $R(x)$} (axis cs:1.2,0,.5);
%
%\draw (axis cs: 2.8,0,1.64) -- node [pos=.5,right] {\scriptsize $r(x)$} (axis cs: 2.8,0,.5);
%
%\filldraw (axis cs:1.2,0,2.68) circle (1pt) (axis cs:1.2,0,.5) circle (1pt)  (axis cs: 2.8,0,1.64)circle (1pt)  (axis cs: 2.8,0,.5) circle (1pt)  ;

\end{axis}

\node [right] at (myplot.right of origin)[shift={(-20pt,-8pt)}] {\scriptsize $x$};
\node [above] at (myplot.above origin) [shift={(0,-23pt)}] {\scriptsize $y$};
\end{tikzpicture}



\begingroup \toks 0={macro:-> \begin {axis}[ width=\marginparwidth +25pt,tick label style={font=\scriptsize },axis on top, axis y line=none, axis lines=center, y dir=reverse, name=myplot, xtick=\empty , ztick=\empty ,extra x ticks={1,3}, extra x tick labels={$a$,$b$}, ymin=-3.5,ymax=3.5,xmin=-.2,xmax=3.5, zmin=-3.5,zmax=3.5] \par \addplot 3[domain=0:2,y domain=90:270, samples y=36,surf, shader=flat, colormap={mp2}{\colormaptwo }] (2,{cos(y)*(.5+x)},{sin(y)*(.5+x)+.5}); \par \addplot 3[domain=1:3,y domain=0:1,surf,shader=flat,colormap={mp2}{\colormapone }] (x,0,{y*(-.5*(x-2)^2+3-((x-2)^2+1))+(x-2)^2+1}); \par \addplot 3[domain=0:2,y domain=-90:90, samples y=36,surf, shader=flat, colormap={mp2}{\colormaptwo }] (2,{cos(y)*(.5+x)},{sin(y)*(.5+x)+.5}); \par \par \addplot 3[domain=-70:252,samples y=0,{\colortwo },thick,smooth,] (2,{2.5*sin(x)},{2.5*cos(x)+.5}); \par \addplot 3[domain=0:360,samples y=0,{\colortwo },thick,smooth,] (2,{.5*cos(x)},{.5*sin(x)+.5}); \par \par \addplot 3[domain=1:3,samples y=0,black,thick,smooth,] (x,0,{-.5*(x-2)^2+3}); \par \addplot 3[domain=1:3,samples y=0,black,thick,smooth,] (x,0,{(x-2)^2+1}); \par \draw [dashed] (axis cs:-.2,0,.5) -- (axis cs:3.5,0,.5); \par \draw (axis cs:1.2,0,2.68) -- node [pos=.6,left] {\scriptsize $R(x)$} (axis cs:1.2,0,.5); \par \draw (axis cs: 2.8,0,1.64) -- node [pos=.5,right] {\scriptsize $r(x)$} (axis cs: 2.8,0,.5); \par \filldraw (axis cs:1.2,0,2.68) circle (1pt) (axis cs:1.2,0,.5) circle (1pt) (axis cs: 2.8,0,1.64)circle (1pt) (axis cs: 2.8,0,.5) circle (1pt) ; \par \par \par \end {axis} \par \node [right] at (myplot.right of origin)[shift={(-20pt,-15pt)}] {\scriptsize $x$}; \node [above] at (myplot.above origin) [shift={(0,-17pt)}] {\scriptsize $y$}; }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %

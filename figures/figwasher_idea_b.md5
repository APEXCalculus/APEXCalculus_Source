\begingroup \toks 0={macro:-> \begin {axis}[ width=\marginparwidth +25pt,tick label style={font=\scriptsize },axis on top, axis y line=none, axis lines=center, y dir=reverse, name=myplot, xtick=\empty , ztick=\empty ,ymin=-3.5,ymax=3.5,xmin=-.2,xmax=3.5, zmin=-3.5,zmax=3.5] \par \addplot 3[domain=1:3,y domain=-40:320, surf,colormap={mp2}{\colormapplaneone },opacity=.8,faceted color=black!40,samples=16,samples y=36,very thin,z buffer=sort] (x,{cos(y)*(-.5*(x-2)^2+2.5)},{sin(y)*(-.5*(x-2)^2+2.5)+.5}); \par \par \addplot 3[domain=1:3,y domain=-40:320, surf,colormap={mp2}{\colormaptwo },opacity=.8,faceted color=black!60,very thin,z buffer=sort,samples=16,samples y=16] (x,{cos(y)*((x-2)^2+.5)},{sin(y)*((x-2)^2+.5)+.5}); \par \addplot 3[domain=1:3,samples y=0,black,thick,smooth,] (x,0,{-.5*(x-2)^2+3}); \par \addplot 3[domain=1:3,samples y=0,black,thick,smooth,dashed] (x,0,{(x-2)^2+1}); \par \addplot 3[domain=0:360,samples y=0,black,thick,smooth,] (3,{2*cos(x)},{2*sin(x)+.5}); \par \addplot 3[domain=0:360,samples y=0,black,thick,smooth,] (3,{1.5*cos(x)},{1.5*sin(x)+.5}); \par \addplot 3[domain=-40:120,samples y=0,black,thick,smooth,] (1,{2*cos(x)},{2*sin(x)+.5}); \par \addplot 3[domain=120:320,samples y=0,black,thick,smooth,dashed] (1,{2*cos(x)},{2*sin(x)+.5}); \par \addplot 3[domain=0:360,samples y=0,black,thick,smooth,dashed,] (1,{1.5*cos(x)},{1.5*sin(x)+.5}); \par \draw [dashed] (axis cs:-.2,0,.5) -- (axis cs:3.5,0,.5); \par \par \end {axis} \par \node [right] at (myplot.right of origin)[shift={(-20pt,-15pt)}] {\scriptsize $x$}; \node [above] at (myplot.above origin) [shift={(0,-17pt)}] {\scriptsize $y$}; }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
